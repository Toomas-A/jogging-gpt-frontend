<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jogging GPT ‚Äî –ü–æ–¥–±–æ—Ä –∫—Ä–æ—Å—Å–æ–≤–æ–∫</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f4f4f4;
      padding-top: 40px;
    }
    .form-container {
      max-width: 700px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <div class="container form-container">
    <h1 class="mb-4 text-center">üëü Jogging GPT ‚Äî –ü–æ–¥–±–æ—Ä –∫—Ä–æ—Å—Å–æ–≤–æ–∫</h1>
    <form id="questionnaire">
      <div class="mb-3">
        <label for="q0" class="form-label">0. –í–∞—à –ø–æ–ª:</label>
        <select class="form-select" id="q0" name="q0">
          <option value="–ú—É–∂—Å–∫–æ–π">–ú—É–∂—Å–∫–æ–π</option>
          <option value="–ñ–µ–Ω—Å–∫–∏–π">–ñ–µ–Ω—Å–∫–∏–π</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="q1" class="form-label">1. –ö–∞–∫–æ–π –±—Ä–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å–µ–π—á–∞—Å?</label>
        <select class="form-select" id="q1" name="q1">
          <option value="Nike">Nike</option>
          <option value="Asics">Asics</option>
          <option value="Brooks">Brooks</option>
          <option value="Hoka">Hoka</option>
          <option value="Saucony">Saucony</option>
          <option value="Adidas">Adidas</option>
          <option value="Other">–î—Ä—É–≥–æ–π</option>
          <option value="–ù–µ –∑–Ω–∞—é">–ù–µ –∑–Ω–∞—é</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="q2" class="form-label">2. –ù—Ä–∞–≤–∏—Ç—Å—è –ª–∏ –≤–∞–º —ç—Ç–∞ –ø–∞—Ä–∞?</label>
        <select class="form-select" id="q2" name="q2">
          <option value="–î–∞">–î–∞</option>
          <option value="–ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã">–ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã</option>
          <option value="–ù–µ—Ç">–ù–µ—Ç</option>
          <option value="N/A">N/A</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="q3" class="form-label">3. –ß—Ç–æ –≤–∞–º –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è?</label>
        <input type="text" class="form-control" id="q3" name="q3" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –∂–º—É—Ç, –∂–µ—Å—Ç–∫–∏–µ, –±—ã—Å—Ç—Ä–æ –∏–∑–Ω–æ—Å–∏–ª–∏—Å—å...">
      </div>
      <div class="mb-3">
        <label for="q7" class="form-label">7. –í–∞—à–∞ —Ü–µ–ª—å:</label>
        <select class="form-select" id="q7" name="q7">
          <option value="–ü—Ä–æ–≥—É–ª–∫–∏">–ü—Ä–æ–≥—É–ª–∫–∏</option>
          <option value="–î–ª–∏–Ω–Ω—ã–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏">–î–ª–∏–Ω–Ω—ã–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏</option>
          <option value="–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è">–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è</option>
          <option value="–¢—Ä–µ–π–ª">–¢—Ä–µ–π–ª</option>
          <option value="–°–º–µ—à–∞–Ω–Ω–æ–µ">–°–º–µ—à–∞–Ω–Ω–æ–µ</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="q16" class="form-label">16. –ë—é–¥–∂–µ—Ç:</label>
        <select class="form-select" id="q16" name="q16">
          <option value="–¥–æ $100">–¥–æ $100</option>
          <option value="$100‚Äì150">$100‚Äì150</option>
          <option value="$150‚Äì200">$150‚Äì200</option>
          <option value="–ë–æ–ª—å—à–µ $200">–ë–æ–ª—å—à–µ $200</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">–ü–æ–¥–æ–±—Ä–∞—Ç—å –∫—Ä–æ—Å—Å–æ–≤–∫–∏</button>
    </form>
  </div>

  <script>
    const form = document.getElementById("questionnaire");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(form);
      const data = {};
      formData.forEach((value, key) => {
        data[key] = value;
      });

      const promptText = `
–í—ã–±–µ—Ä–∏ –∫—Ä–æ—Å—Å–æ–≤–∫–∏ 2024‚Äì2025 —Å —É—á—ë—Ç–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
–ü–æ–ª: ${data.q0}
–ë—Ä–µ–Ω–¥: ${data.q1}
–ù—Ä–∞–≤–∏—Ç—Å—è: ${data.q2}
–ß—Ç–æ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è: ${data.q3}
–¶–µ–ª—å: ${data.q7}
–ë—é–¥–∂–µ—Ç: ${data.q16}
      `.trim();

      console.log("üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä:", promptText);

      try {
        const res = await fetch("https://jogging-gpt-backend.onrender.com/gpt", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ prompt: promptText })
        });

        if (!res.ok) {
          throw new Error("–°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É");
        }

        const result = await res.json();
        localStorage.setItem("shoeResults", JSON.stringify(result));
        window.location.href = "results.html";
      } catch (err) {
        alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Å–µ—Ä–≤–µ—Ä—É: " + err.message);
      }
    });
  </script>
</body>
</html>
